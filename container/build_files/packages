# /*
#shellcheck disable=SC2174,SC2114
# */

set ${CI:+-x} -euo pipefail

setterm --foreground green
echo "########################"
echo "# Installing packages..."
echo "########################"
setterm --foreground default

setterm --foreground blue
echo "# Enabling Non-Free Repository..."
setterm --foreground default

sed -i 's/Components: main/Components: main non-free non-free-firmware/' /etc/apt/sources.list.d/debian.sources

setterm --foreground blue
echo "# Installing dependencies..."
setterm --foreground default

apt-get update
apt install --assume-yes --no-install-recommends --no-install-suggests \
  bind9 \
  bzip2 \
  ca-certificates \
  console-data \
  cpanminus \
  cron \
  curl \
  debconf \
  distrobox \
  dnsutils \
  fdisk \
  file \
  firmware-amd-graphics \
  firmware-intel-graphics \
  firmware-linux \
  firmware-linux-free \
  firmware-linux-nonfree \
  firmware-nvidia-graphics \
  git \
  gpg \
  gzip \
  iputils-ping \
  kbd \
  links \
  lsb-release \
  lzma \
  net-tools \
  openssh-client \
  openssh-server \
  open-vm-tools \
  skopeo \
  zstd
rm -rf /var/lib/apt/lists
mkdir /var/lib/apt/lists
apt-get clean -y
